Metadata-Version: 2.4
Name: taskhub
Version: 2.0.0
Summary: Taskhub MCP Server - åŸºäºFastMCPçš„ä»»åŠ¡ç®¡ç†å’Œä»£ç†åè°ƒæœåŠ¡å™¨
Author-email: limian1761 <limian1761@gmail.com>
Project-URL: Homepage, https://github.com/your-repo/Taskhub
Project-URL: Bug Tracker, https://github.com/your-repo/Taskhub/issues
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: mcp[cli,fastapi]>=1.12.2
Requires-Dist: pydantic>=2.0.0
Requires-Dist: fastapi>=0.104.0
Requires-Dist: uvicorn[standard]>=0.24.0
Requires-Dist: jinja2>=3.1.0
Requires-Dist: python-multipart>=0.0.6
Provides-Extra: dev
Requires-Dist: pytest; extra == "dev"
Requires-Dist: black; extra == "dev"
Requires-Dist: ruff; extra == "dev"
Requires-Dist: uvicorn; extra == "dev"

# Taskhub MCP Server

Taskhubæ˜¯ä¸€ä¸ªåŸºäºFastMCPçš„ä»»åŠ¡ç®¡ç†å’Œä»£ç†åè°ƒæœåŠ¡å™¨ï¼Œä¸“ä¸ºæ”¯æŒå¤šä»£ç†åä½œå¤„ç†å¤æ‚ä»»åŠ¡è€Œè®¾è®¡ã€‚

## æ ¸å¿ƒåŠŸèƒ½

- ğŸ¯ **ä»»åŠ¡ç®¡ç†**: æä¾›ä»»åŠ¡çš„åˆ›å»ºã€åˆ†é…ã€æ›´æ–°å’Œç›‘æ§åŠŸèƒ½ã€‚
- ğŸ¤– **ä»£ç†åè°ƒ**: æ ¹æ®ä»£ç†çš„èƒ½åŠ›å’Œå£°æœ›ï¼Œæ™ºèƒ½åœ°åˆ†é…ä»»åŠ¡ã€‚
- ğŸ§  **æ™ºèƒ½æ¨è**: ä¸ºä»£ç†æ¨èæœ€åŒ¹é…çš„ä»»åŠ¡ï¼Œæå‡åä½œæ•ˆç‡ã€‚
- â­ **å£°èª‰ç³»ç»Ÿ**: é€šè¿‡ä»»åŠ¡è¯„ä»·å’Œåé¦ˆï¼ŒåŠ¨æ€ç®¡ç†ä»£ç†çš„å£°æœ›ã€‚
- ğŸ“¦ **æ•°æ®å½’æ¡£**: è‡ªåŠ¨å½’æ¡£å·²å®Œæˆçš„ä»»åŠ¡ï¼Œç®€åŒ–æ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚
- ğŸ”— **ä¾èµ–ç®¡ç†**: æ”¯æŒå®šä¹‰å’Œå¤„ç†ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚
- ğŸ“Š **çŠ¶æ€è·Ÿè¸ª**: æä¾›ä»»åŠ¡å’Œä»£ç†çš„å®æ—¶çŠ¶æ€ç›‘æ§ã€‚
- ğŸ”„ **ç§Ÿçº¦æœºåˆ¶**: ç¡®ä¿ä»»åŠ¡åœ¨è®¤é¢†åè¢«é”å®šï¼Œé˜²æ­¢é‡å¤å¤„ç†ã€‚
- ğŸŒ **Webç®¡ç†ç•Œé¢**: å†…ç½®ç°ä»£åŒ–çš„Webé¢æ¿ï¼Œç”¨äºå¯è§†åŒ–ç®¡ç†ã€‚
- ğŸ³ **å®¹å™¨åŒ–æ”¯æŒ**: æä¾›Dockerå’ŒDocker Composeé…ç½®ï¼Œç®€åŒ–éƒ¨ç½²æµç¨‹ã€‚

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.10+
- [uv](https://github.com/astral-sh/uv) (æ¨èçš„åŒ…ç®¡ç†å™¨)

### å®‰è£…

1.  **å…‹éš†ä»“åº“**
    ```bash
    git clone https://github.com/your-repo/Taskhub.git
    cd Taskhub
    ```

2.  **å®‰è£…ä¾èµ–**
    ä½¿ç”¨ `uv` åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–ã€‚é¡¹ç›®é…ç½®ä¸ºå¯ç¼–è¾‘æ¨¡å¼ (`-e`)ï¼Œè¿™æ„å‘³ç€æ‚¨å¯¹æºä»£ç çš„æ›´æ”¹ä¼šç«‹å³ç”Ÿæ•ˆã€‚
    ```bash
    # åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
    uv venv
    source .venv/bin/activate  # Linux/macOS
    .venv\Scripts\activate    # Windows

    # å®‰è£…é¡¹ç›®åŠæ ¸å¿ƒä¾èµ–
    uv pip install -e .

    # (å¯é€‰) å®‰è£…å¼€å‘ä¾èµ–
    uv pip install -e ".[dev]"
    ```

### å¯åŠ¨æœåŠ¡

ç›´æ¥è¿è¡Œå¼€å‘è„šæœ¬å³å¯å¯åŠ¨æœåŠ¡å™¨ã€‚è¯¥è„šæœ¬ä¼šå¤„ç†æ‰€æœ‰å¿…è¦çš„ç¯å¢ƒé…ç½®ã€‚

```bash
# Windows
scripts\run_dev.bat

# Linux/Mac
./scripts/run_dev.sh
```
æœåŠ¡å™¨å°†åœ¨ `http://localhost:8000` ä¸Šå¯åŠ¨ï¼Œå¹¶æ”¯æŒSSEï¼ˆServer-Sent Eventsï¼‰ä¼ è¾“ã€‚

### Dockeréƒ¨ç½²

ä½¿ç”¨é¡¹ç›®æä¾›çš„ `docker-compose.yml` æ–‡ä»¶å¯ä»¥å¿«é€Ÿå¯åŠ¨æœåŠ¡ã€‚

```bash
# æ„å»ºå¹¶ä»¥åå°æ¨¡å¼è¿è¡ŒæœåŠ¡
docker-compose up --build -d
```

## é¡¹ç›®ç»“æ„

é¡¹ç›®éµå¾ªæ ‡å‡†çš„ `src` å¸ƒå±€ï¼Œä»¥æ¸…æ™°åœ°åˆ†ç¦»æºä»£ç å’Œé¡¹ç›®é…ç½®ã€‚

```
taskhub/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ taskhub/              # PythonåŒ…çš„æ ¹ç›®å½•
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ server.py         # ä¸»æœåŠ¡å™¨å…¥å£ (MCP)
â”‚       â”œâ”€â”€ web_server.py     # Webç®¡ç†ç•Œé¢æœåŠ¡å™¨ (FastAPI)
â”‚       â”œâ”€â”€ admin_server.py   # åå°ç®¡ç†ä»»åŠ¡æœåŠ¡å™¨
â”‚       â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹ (Pydantic)
â”‚       â”œâ”€â”€ storage/          # æ•°æ®å­˜å‚¨å±‚
â”‚       â”œâ”€â”€ tools/            # MCPå·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ utils/            # å·¥å…·ç±»
â”‚       â”œâ”€â”€ templates/        # Webé¡µé¢æ¨¡æ¿ (Jinja2)
â”‚       â””â”€â”€ static/           # é™æ€æ–‡ä»¶
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_taskhub.py       # å•å…ƒæµ‹è¯•
â”œâ”€â”€ configs/
â”‚   â”œâ”€â”€ config.json           # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ logging.json          # æ—¥å¿—é…ç½®
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ run_dev.bat           # Windowså¼€å‘å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ run_dev.sh            # Linux/macOSå¼€å‘å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ launch.py             # å†…éƒ¨å¯åŠ¨å¸®åŠ©è„šæœ¬
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ pyproject.toml            # é¡¹ç›®é…ç½® (PEP 621)
â””â”€â”€ README.md
```

## API (å·¥å…·å‡½æ•°)

ä»¥ä¸‹æ˜¯å¯é€šè¿‡MCPå®¢æˆ·ç«¯è°ƒç”¨çš„æ ¸å¿ƒå·¥å…·å‡½æ•°ã€‚

#### 1. `task_list`
åˆ—å‡ºç¬¦åˆæ¡ä»¶çš„ä»»åŠ¡ã€‚

- **å‚æ•°**: `status`, `capability`, `assignee` (å‡ä¸ºå¯é€‰)
- **ç¤ºä¾‹**: `{"status": "pending", "capability": "python"}`

#### 2. `task_publish`
å‘å¸ƒä¸€ä¸ªæ–°ä»»åŠ¡ã€‚

- **å‚æ•°**: `name`, `details`, `capability`, `created_by` (å¿…å¡«), `depends_on`, `candidates` (å¯é€‰)
- **ç¤ºä¾‹**: `{"name": "æ•°æ®åˆ†æ", "details": "åˆ†æç”¨æˆ·è¡Œä¸ºæ•°æ®", "capability": "python"}`

#### 3. `task_claim`
ä»£ç†è®¤é¢†ä¸€ä¸ªä»»åŠ¡ã€‚

- **å‚æ•°**: `task_id`, `agent_id`
- **ç¤ºä¾‹**: `{"task_id": "task-001", "agent_id": "agent-001"}`

#### 4. `report_submit`
æäº¤ä»»åŠ¡çš„æ‰§è¡ŒæŠ¥å‘Šã€‚

- **å‚æ•°**: `task_id`, `status` (completed/failed), `result`, `details` (å¯é€‰)
- **ç¤ºä¾‹**: `{"task_id": "task-001", "status": "completed", "result": "åˆ†æå®Œæˆ"}`

#### 5. `task_delete`
åˆ é™¤ä¸€ä¸ªä»»åŠ¡ã€‚

- **å‚æ•°**: `task_id`, `force` (å¯é€‰, é»˜è®¤ä¸º `false`)
- **æ³¨æ„**: å¦‚æœä»»åŠ¡è¢«è®¤é¢†æˆ–è¢«å…¶ä»–ä»»åŠ¡ä¾èµ–ï¼Œ`force=false` æ—¶åˆ é™¤ä¼šå¤±è´¥ã€‚

#### 6. `report_evaluate`
è¯„ä»·ä¸€ä¸ªä»»åŠ¡æŠ¥å‘Šï¼Œå¹¶æ›´æ–°ä»£ç†å£°æœ›ã€‚

- **å‚æ•°**: `report_id`, `score` (0-100), `reputation_change`, `feedback`, `capability_updates` (å¯é€‰)
- **ç¤ºä¾‹**: `{"report_id": "report-001", "score": 95, "reputation_change": 10}`

#### 7. `task_archive`
å½’æ¡£ä¸€ä¸ªå·²å®Œæˆçš„ä»»åŠ¡ã€‚

- **å‚æ•°**: `task_id`

#### 8. `task_suggest_agents`
ä¸ºä»»åŠ¡æ¨èæœ€åˆé€‚çš„ä»£ç†ã€‚

- **å‚æ•°**: `task_id`, `limit` (å¯é€‰, é»˜è®¤10)

#### 9. `agent_register`
æ³¨å†Œä»£ç†å¹¶å£°æ˜å…¶èƒ½åŠ›ã€‚

- **é‡è¦**: `agent_id` å’Œ `name` **å¿…é¡»**é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®ï¼Œä¸èƒ½ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚
- **ç¯å¢ƒå˜é‡**: 
  - `AGENT_ID`: ä»£ç†çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
  - `AGENT_NAME`: ä»£ç†çš„æ˜¾ç¤ºåç§°ã€‚
- **ç¤ºä¾‹**: 
  1.  **è®¾ç½®ç¯å¢ƒå˜é‡**:
      ```bash
      export AGENT_ID=code-expert-001
      export AGENT_NAME="ä»£ç ä¸“å®¶"
      ```
  2.  **è°ƒç”¨å·¥å…· (JSONå‚æ•°)**:
      ```json
      {
        "capabilities": ["python", "code_review"],
        "capability_levels": {"python": 8, "code_review": 9}
      }
      ```
## Cursor é…ç½®

ä½¿ç”¨é¡¹ç›®æä¾›çš„ `run_stdio.bat` (Windows) æˆ– `run_stdio.sh` (Linux/macOS) è„šæœ¬å¯ä»¥ç®€åŒ–ä¸Cursorç­‰MCPå®¢æˆ·ç«¯çš„é›†æˆã€‚

**é‡è¦**: åœ¨å¯åŠ¨å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ¿€æ´»äº†è™šæ‹Ÿç¯å¢ƒ (`.venv`)ï¼Œå¦åˆ™è„šæœ¬å¯èƒ½æ— æ³•æ­£ç¡®æ‰§è¡Œã€‚

```bash
# Windows
.venv\Scripts\activate
# Linux/macOS
source .venv/bin/activate
```

é…ç½®ç¤ºä¾‹å¦‚ä¸‹ï¼Œå°† `command` æŒ‡å‘å¯¹åº”çš„è„šæœ¬å³å¯ã€‚

```json
{
  "mcpServers": {
    "taskhub": {
      "command": "scripts/run_stdio.bat", // Windows. Use "scripts/run_stdio.sh" on Linux/macOS.  absolutely path
      "env": {
        "AGENT_ID": "YOUR_AGENT_ID",
        "AGENT_NAME": "YOUR_AGENT_NAME"
      }
    }
  }
}
```

## è´¡çŒ®

æ¬¢è¿é€šè¿‡æäº¤ Issue å’Œ Pull Request æ¥ä¸ºé¡¹ç›®åšå‡ºè´¡çŒ®ã€‚

### å¼€å‘è§„èŒƒ
1.  **ä»£ç æ ¼å¼**: ä½¿ç”¨ Black å’Œ Ruff è¿›è¡Œæ ¼å¼åŒ–å’Œæ£€æŸ¥ã€‚
2.  **æµ‹è¯•**: æ‰€æœ‰æ–°åŠŸèƒ½æˆ–ä¿®å¤éƒ½åº”é™„å¸¦ç›¸åº”çš„å•å…ƒæµ‹è¯•ã€‚
3.  **æ–‡æ¡£**: åŠæ—¶æ›´æ–° `README.md` å’Œç›¸å…³ä»£ç æ³¨é‡Šã€‚
4.  **æäº¤ä¿¡æ¯**: éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚
